agent {
  data_dir = "/run/spire/data"
  log_level = "INFO"
  server_address = "spire-server"
  server_port = "8081"
  socket_path = "/run/spire/sockets/agent.sock"
  trust_domain = "aether-guard.local"
  trust_bundle_path = "/run/spire/bootstrap/trust-bundle.pem"
}

plugins {
  NodeAttestor "join_token" {
    plugin_data {}
  }

  KeyManager "disk" {
    plugin_data {
      directory = "/run/spire/data"
    }
  }

  WorkloadAttestor "docker" {
    plugin_data {
      docker_socket_path = "unix:///var/run/docker.sock"
      container_id_cgroup_matchers = [
        "/docker/<id>",
        "/../<id>"
      ]
    }
  }

  WorkloadAttestor "unix" {
    plugin_data {}
  }
}
